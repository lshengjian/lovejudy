!function(t){function e(e){for(var a,r,d=e[0],n=e[1],l=e[2],m=0,g=[];m<d.length;m++)r=d[m],i[r]&&g.push(i[r][0]),i[r]=0;for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a]);for(o&&o(e);g.length;)g.shift()();return h.push.apply(h,l||[]),s()}function s(){for(var t,e=0;e<h.length;e++){for(var s=h[e],a=!0,d=1;d<s.length;d++){var n=s[d];0!==i[n]&&(a=!1)}a&&(h.splice(e--,1),t=r(r.s=s[0]))}return t}var a={},i={1:0},h=[];function r(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=a,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var d=window.webpackJsonp=window.webpackJsonp||[],n=d.push.bind(d);d.push=e,d=d.slice();for(var l=0;l<d.length;l++)e(d[l]);var o=n;h.push([2,0]),s()}({2:function(t,e,s){"use strict";s.r(e);s(6),s(0);let a=["mandelbrot3","mandelbrot5","sky"];var i=new class{init(t){this.m_visited=[],this.m_cnt=0,this.m_lines=t,this.m_state=new Map,this.m_last=[]}getCurrentSide(){return this.m_cnt%2==0?"0":"1"}getIndex(){return this.m_cnt}getCode(t,e){return 100*t+e}getNeighborArray(t){let e=[],s=Math.floor(t/100),a=t%100,i=a-1,h=a+1,r=s-1,d=s+1;return i>=0&&e.push(this.getCode(s,i)),h<this.m_lines&&e.push(this.getCode(s,h)),r>=0&&e.push(this.getCode(r,a)),d<this.m_lines&&e.push(this.getCode(d,a)),e}findDead(t){let e=[],s=[],a=[],i=this.m_state.get(t).m_idx%2,h=this.getNeighborArray(t);for(let t of h)this.m_state.has(t)&&i!==this.m_state.get(t).m_idx%2&&s.push(t);for(;s.length>0;){let t=s.shift();a.push(t),0==this.findFree(t).length&&e.push(t);let h=this.getNeighborArray(t);for(let t of h){if(a.includes(t))continue;let e=this.m_state.get(t);e&&i!==e.m_idx%2&&s.push(t)}}return e}findFree(t){let e=[t],s=[],a=[],i=this.m_state.get(t).m_idx%2;for(;e.length>0;){let t=e.shift();s.push(t);let h=this.getNeighborArray(t);for(let t of h)if(this.m_state.has(t)){if(s.includes(t))continue;i===this.m_state.get(t).m_idx%2&&e.push(t)}else a.push(t)}return a}clean(t){for(let e of t){let t=this.m_state.get(e);this.m_last.push(t),this.m_state.delete(e)}}tryPlaceChessman(t,e,s){this.m_last=[];let a=this.getCode(t,e);s.m_idx=this.m_cnt,s.m_code=a,this.m_state.set(a,s);let i=this.findDead(a);return 0==i.length&&0==this.findFree(a).length?(this.m_state.delete(a),s.kill(),!1):(this.clean(i),this.m_visited.push(a),this.m_cnt++,!0)}isPlaced(t){return this.m_state.has(t)}getPlacedChessman(t){return this.m_state.get(t)}};let h=48,r=48,d=42,n=d/2*.9,l=19,o=[];let m=new Phaser.Game(960,850,Phaser.AUTO,"",null);m.state.add("play",class extends Phaser.State{preload(){this.load.image("background","assets/weiqi-bg.png"),this.load.image("borad","assets/weiqi-borad.png"),this.load.audio("eate","assets/eate.mp3"),this.load.audio("place","assets/place.mp3"),i.init(l)}makeBitmapData(){let{game:t}=this;if(o.length<1){o[0]=t.add.bitmapData(d,d),o[1]=t.add.bitmapData(d,d);let e=o[0].context.createRadialGradient(d/2-n/2,d/2-n/2,n/6,d/2,d/2,n);e.addColorStop(0,"#FDFDFD"),e.addColorStop(1,"#000000"),o[0].circle(d/2,d/2,n,e),t.cache.addBitmapData("0",o[0]),(e=o[1].context.createRadialGradient(d/2-n/2,d/2-n/2,n/6,d/2,d/2,n)).addColorStop(0,"#B9B9B9"),e.addColorStop(1,"#FFFFFF"),o[1].circle(d/2,d/2,n,e),t.cache.addBitmapData("1",o[1])}}addChessman(t,e){let s=this.game.add.sprite(h+d*e-n,r+d*t-n,this.game.cache.getBitmapData(i.getCurrentSide()));if(i.tryPlaceChessman(t,e,s)){i.getCurrentSide(),s.inputEnabled=!0,this.m_place.play(),s.events.onInputDown.add(t=>{let e=i.findFree(t.m_code);this.flags=[];for(let t of e){let e=Math.floor(t/100),s=t%100;this.flags.push(new Phaser.Circle(h+d*s,r+d*e,12))}}),i.m_last.length>0&&(this.m_eate.play(),console.log(i.m_last));for(let t of i.m_last)this.game.add.tween(t).to({alpha:.1},1e3,Phaser.Easing.Linear.None,!0,0,3).onComplete.add(()=>{t.kill()});return s}}render(){for(let t of this.flags)this.game.debug.geom(t,"#00ff00")}create(){this.flags=[],this.makeBitmapData(),this.m_background=this.add.tileSprite(0,0,this.game.width,this.game.height,"background"),this.m_borad=this.add.sprite(4,4,"borad"),this.m_place=this.add.audio("place"),this.m_eate=this.add.audio("eate"),this.game.input.onDown.add(this.onClick,this),this.tips=[0,0],this.tips[1]=this.game.add.sprite(1.6*h+d*l,4*r,this.game.cache.getBitmapData("1")),this.tips[0]=this.game.add.sprite(1.6*h+d*l,this.game.height-4*r,this.game.cache.getBitmapData("0")),this.tips[0].anchor.setTo(.5),this.tips[1].anchor.setTo(.5)}onClick(){let{x:t,y:e}=this.game.input,s=Math.round((t-h)/d),a=Math.round((e-r)/d);a<0&&(a=0),s<0&&(s=0),a>=l&&(a=l-1),s>=l&&(s=l-1);let n=i.getCode(a,s);i.isPlaced(n)||this.addChessman(a,s)}update(){let t=i.getIndex()%2;this.tips[t].angle+=2}},!1),m.state.add("boot",class extends Phaser.State{preload(){this.ready=!1,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0;let t=this.game.rnd.integer()%a.length;this.game.load.shader("demo","assets/shaders/"+a[t]+".frag"),this.load.audio("music","assets/bgm.mp3")}create(){this.m_music=this.add.audio("music");let t=new Phaser.Filter(this.game,null,this.game.cache.getShader("demo"));t.setResolution(this.game.width,this.game.height);let e=this.game.add.sprite();e.width=this.game.width,e.height=this.game.height,e.filters=[t],this.filter=t,this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR).onDown.add(this.jump,this)}jump(){this.m_music.stop(),this.game.state.start("play")}update(){this.cache.isSoundDecoded("music")&&(this.filter.update(this.game.input.activePointer),0==this.ready&&(this.ready=!0,console.log("Music Decoded"),this.m_music.play("",0,.3,!1)))}},!0)}});